\ProvidesPackage{style}

\usepackage[bottom]{footmisc}
\usepackage[explicit]{titlesec}
\usepackage{fancyhdr}
\usepackage{amsmath}
\usepackage{url}

\title{
    The Art Of Divine Meditation\\ 
    Profitable for all christians to know and practise\\ 
    Simplified with two large patterns of meditation\\ 
    The one of eternal life as the end\\ 
    The other of death as the way
}

\date{1863\thanks{Originally published 1607}}

\author{Joseph Hall\\ Compiled and edited by Philip Wynter} 

\chapterstyle{chappell}

\titleformat{\section}
    {\normalfont\scshape}{}{.5em}{#1}
\titlespacing{\section}
    {-0.5em}{1em}{.5em}

\titleformat{\subsection}
    {\normalfont\bfseries}{}{.5em}{#1}
\titlespacing{\subsection}
    {0em}{.5em}{.25em}

\titleformat{\subsubsection}
    {\normalfont\itshape}{}{.5em}{#1}
\titlespacing{\subsubsection}
    {0em}{.5em}{.25em}

\pagestyle{fancy}
\renewcommand{\chaptermark}[1]
    { \markboth{#1}{} }

\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\fancyhead[RE]{\textit{ \nouppercase{\leftmark}} }
\fancyhead[LO]{\textit{ \nouppercase{The Art Of Divine Meditation}} }
\renewcommand{\headrulewidth}{0pt} % remove lines as well
\renewcommand{\footrulewidth}{0pt}

%%% textblock dimensions
\newlength{\rbtextwidth}\setlength{\rbtextwidth}{360pt}
\newlength{\rbtextheight}\setlength{\rbtextheight}{400pt}

%%% title page text --- one line per ‘paragraph’
\newcommand*{\covertext}{%
    {\huge \uppercase{The Art Of Divine Meditation}\par}
    {\normalsize \uppercase{Profitable for all christians to know and practise:}\par}
    {\tiny \uppercase{Exemplified with}\par}
    {\normalsize \uppercase{Two large patterns of meditation;}\par}
    {\footnotesize \uppercase{The one of eternal life as the end;} \par}
    {\footnotesize \uppercase{The other of death as the way.} \par}
    \rule{0.15\rbtextwidth}{0.4pt}\par
    {\Large \uppercase{by Jos.~Hall.}\par}
    {\small \uppercase{edited by Philip~Wynter}\par}
    \rule{0.75\rbtextwidth}{0.4pt}\par
    {\footnotesize \uppercase{Originally published 1607}\par}
    {\tiny \uppercase{Compiled and published 1863}\par}
    \rule{0.5\rbtextwidth}{0.4pt}\par
    {\tiny \uppercase{digitized by Google from the library of the University of California}\par}
    {\tiny \uppercase{Hosted by Archive.org}\par}
    {\tiny \uppercase{Typeset in \LaTeX by Ben}\par}
    \rule{0.5\rbtextwidth}{0.4pt}\par
}

%% set up for the double frame
\newlength{\sepframe}
\newlength{\framex}
\newlength{\framey}
\setlength{\sepframe}{2.4pt}
\setlength{\framex}{\rbtextwidth}
\addtolength{\framex}{2\sepframe}
\setlength{\framey}{\rbtextheight}
\addtolength{\framey}{2\sepframe}
%% use a picture for the framed text    
\makeatletter
    \newcommand*{\titleRB}{%
        \begin{picture}(\strip@pt\rbtextwidth,\strip@pt\rbtextheight)%
            \thinlines
            \put(0,0){\framebox(\strip@pt\rbtextwidth,%
            \strip@pt\rbtextheight){%
                \begin{minipage}{\rbtextwidth}
                    \centering
                    \setlength{\parskip}{0.67\baselineskip}
                    \covertext
                \end{minipage}
            }}%
            \put(-\strip@pt\sepframe,-\strip@pt\sepframe)%
                {\framebox(\strip@pt\framex,\strip@pt\framey){}}%
        \end{picture}}
\makeatother
